local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
local UserInputService = game:GetService("UserInputService")

-- ConfiguraciÃ³n
local PET_NAME = "Swift Samurai"
local ROCK_NAME = "Rock5M"
local PROTEIN_EGG_NAME = "ProteinEgg"
local BASE_REP_SPEED = 1000
local SWIFT_SAMURAI_REP_SPEED = 2000
local PROTEIN_EGG_INTERVAL = 30 * 60
local DOUBLE_REP_MULTIPLIER = 2 -- Multiplicador para el pase de doble repeticiÃ³n

-- Variables de estado
local hasSwiftSamurai = false
local lastProteinEggTime = 0
local isScriptEnabled = false
local hasDoubleRepPass = true -- SimulaciÃ³n del pase de doble repeticiÃ³n (cambia a false si no lo tienes)

-- Funciones de utilidad
local function equipPet()
    hasSwiftSamurai = false
    if LocalPlayer.petsFolder and LocalPlayer.petsFolder.Unique then
        for _, pet in pairs(LocalPlayer.petsFolder.Unique:GetChildren()) do
            if pet.Name == PET_NAME then
                ReplicatedStorage.rEvents.equipPetEvent:FireServer("equipPet", pet)
                hasSwiftSamurai = true
                break
            end
        end
    end
end

local function eatProteinEgg()
    if LocalPlayer.Backpack then
        for _, item in pairs(LocalPlayer.Backpack:GetChildren()) do
            if item.Name == PROTEIN_EGG_NAME then
                ReplicatedStorage.rEvents.eatEvent:FireServer("eat", item)
                break
            end
        end
    end
end

local function hitRock()
    local rock = workspace:FindFirstChild(ROCK_NAME)
    if rock then
        HumanoidRootPart.CFrame = rock.CFrame * CFrame.new(0, 0, -5)
        ReplicatedStorage.rEvents.hitEvent:FireServer("hit", rock)
    end
end

-- GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "MuscleScriptGUI"
screenGui.Parent = LocalPlayer.PlayerGui

local toggleButton = Instance.new("TextButton")
toggleButton.Name = "ToggleButton"
toggleButton.Size = UDim2.new(0, 100, 0, 30)
toggleButton.Position = UDim2.new(0, 10, 0, 10)
toggleButton.BackgroundColor3 = Color3.new(0.4, 0.4, 0.4)
toggleButton.TextColor3 = Color3.new(1, 1, 1)
toggleButton.Text = "Iniciar"
toggleButton.Parent = screenGui

-- Funciones de GUI
local function toggleScript()
    isScriptEnabled = not isScriptEnabled
    if isScriptEnabled then
        toggleButton.Text = "Detener"
    else
        toggleButton.Text = "Iniciar"
    end
end

-- Eventos de GUI
toggleButton.MouseButton1Click:Connect(toggleScript)

-- Bucle principal
task.spawn(function()
    equipPet()

    while true do
        if isScriptEnabled then
            local repSpeed = SWIFT_SAMURAI_REP_SPEED -- Siempre usa la velocidad del Swift Samurai

            -- Aplicar el multiplicador de doble repeticiÃ³n si el pase estÃ¡ activo
            if hasDoubleRepPass then
                repSpeed = repSpeed * DOUBLE_REP_MULTIPLIER
            end

            for _ = 1, repSpeed do
                LocalPlayer.muscleEvent:FireServer("rep")
            end

            if tick() - lastProteinEggTime >= PROTEIN_EGG_INTERVAL then
                eatProteinEgg()
                lastProteinEggTime = tick()
            end

            if tick() % 5 < 1 then
                hitRock()
            end
        end

        task.wait(0.0001)
    end
end)
